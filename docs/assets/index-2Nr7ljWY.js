(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function b(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function It(t){return t!=null&&typeof t.GetEnumerator=="function"}function At(t){return t!=null&&typeof t.CompareTo=="function"}function Ot(t){return t!=null&&typeof t.Equals=="function"}function Nt(t){return t!=null&&typeof t.GetHashCode=="function"}function Gt(t){return t!=null&&typeof t.Dispose=="function"}function C(t){Gt(t)&&t.Dispose()}function q(){return null}function ft(t,e){var n,r;return((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===((r=Object.getPrototypeOf(e))==null?void 0:r.constructor)}class vt{constructor(e){this.iter=e,this.current=q()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this.iter.next();return this.current=e.value,!e.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function y(t){return It(t)?t.GetEnumerator():new vt(t[Symbol.iterator]())}function ht(t){return{next(){const e=t["System.Collections.IEnumerator.MoveNext"](),n=e?t["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0;return{done:!e,value:n}}}}function nt(t){const e=t;return typeof e.offset=="number"?e.offset:t.kind===1?0:t.getTimezoneOffset()*-6e4}class S{static id(e){return S.idMap.has(e)||S.idMap.set(e,++S.count),S.idMap.get(e)}}S.idMap=new WeakMap;S.count=0;function dt(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=n*33^t.charCodeAt(e++);return n}function rt(t){return t*2654435761|0}function jt(t){return dt(t.toString(32))}function W(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const o=t[r];e=(e<<5)+e^o}return e}function Mt(t){return t.getTime()}function Rt(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=M(t[r]);return W(n)}function M(t){var e;if(t==null)return 0;switch(typeof t){case"boolean":return t?1:0;case"number":return rt(t);case"bigint":return jt(t);case"string":return dt(t);default:{if(Nt(t))return t.GetHashCode();if(b(t))return Rt(t);if(t instanceof Date)return Mt(t);if(((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)===Object){const n=Object.values(t).map(r=>M(r));return W(n)}else return rt(S.id(t))}}}function Xt(t,e,n){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Yt(t,e){return Xt(t,e,R)}function Ft(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++)if(n[o]!==r[o]||!R(t[n[o]],e[r[o]]))return!1;return!0}function R(t,e){var n;return t===e?!0:t==null?e==null:e==null?!1:Ot(t)?t.Equals(e):b(t)?b(e)&&Yt(t,e):typeof t!="object"?!1:t instanceof Date?e instanceof Date&&mt(t,e)===0:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object&&Ft(t,e)}function mt(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+nt(t),r=e.getTime()+nt(e)),n===r?0:n<r?-1:1}function kt(t,e,n){if(t==null)return e==null?0:1;if(e==null)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,o=0;r<t.length;r++)if(o=n(t[r],e[r]),o!==0)return o;return 0}function Pt(t,e){return kt(t,e,I)}function qt(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let o=0,s=0;o<n.length;o++){const i=n[o];if(i!==r[o])return i<r[o]?-1:1;if(s=I(t[i],e[i]),s!==0)return s}return 0}function I(t,e){var n;return t===e?0:t==null?e==null?0:-1:e==null?1:At(t)?t.CompareTo(e):b(t)?b(e)?Pt(t,e):-1:typeof t!="object"?t<e?-1:1:t instanceof Date?e instanceof Date?mt(t,e):-1:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object?qt(t,e):-1}function Tt(t){let e=0,n="[";for(const r of t){if(e===0)n+=G(r);else if(e===100){n+="; ...";break}else n+="; "+G(r);e++}return n+"]"}function G(t,e=0){var n;if(t!=null&&typeof t=="object"){if(typeof t.toString=="function")return t.toString();if(Symbol.iterator in t)return Tt(t);{const r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor;return r===Object&&e<10?"{ "+Object.entries(t).map(([o,s])=>o+" = "+G(s,e+1)).join(`
  `)+" }":(r==null?void 0:r.name)??""}}return String(t)}function $t(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}function Lt(t){return"{ "+Object.entries(t).map(([e,n])=>e+" = "+G(n)).join(`
  `)+" }"}function Bt(t){const e=Object.values(t).map(n=>M(n));return W(e)}function Dt(t,e){if(t===e)return!0;if(ft(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!R(t[n[r]],e[n[r]]))return!1;return!0}else return!1}function Ht(t,e){if(t===e)return 0;if(ft(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const o=I(t[n[r]],e[n[r]]);if(o!==0)return o}return 0}else return-1}class Z{toJSON(){return $t(this)}toString(){return Lt(this)}GetHashCode(){return Bt(this)}Equals(e){return Dt(this,e)}CompareTo(e){return Ht(this,e)}}function Kt(t,e){return t>e?t:e}function J(t,e){return new Array(e)}class A{constructor(e){this.value=e}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return M(this.value)}Equals(e){return e==null?!1:R(this.value,e instanceof A?e.value:e)}CompareTo(e){return e==null?1:I(this.value,e instanceof A?e.value:e)}}function h(t){if(t==null)throw new Error("Option has no value");return t instanceof A?t.value:t}function T(t){return t==null||t instanceof A?new A(t):t}const pt="Collection was empty.";function gt(t,e,n,r){const o=e|0;return t.fill(r,o,o+n)}function Vt(t,e,n,r){if(e.length!==n.length)throw new Error("Arrays had different lengths");const o=J(r,e.length);for(let s=0;s<=e.length-1;s++)X(o,s,t(d(s,e),d(s,n)));return o}function Wt(t,e){const n=J(e,1);return X(n,0,t),n}function _t(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=J(n,t);for(let o=0;o<=t-1;o++)X(r,o,e(o));return r}function d(t,e){if(t<0||t>=e.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");return e[t]}function X(t,e,n){if(e<0||e>=t.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");t[e]=n}function Y(t,e,n){let r=n.GetZero();for(let o=0;o<=e.length-1;o++)r=n.Add(r,t(d(o,e)));return r}BigInt.prototype.toJSON=function(){return`${this.toString()}`};function Zt(t,e){return t<e?-1:t>e?1:0}function Jt(t,e){return t+e}function B(t){return BigInt(t)}function Ut(t){return BigInt(Math.trunc(t))}function zt(t){return Number(BigInt.asIntN(32,t))}function N(t){return BigInt.asIntN(64,t)}function ot(t){return Number(t)}function Qt(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function xt(t){throw new Error(t)}class O extends Z{constructor(e,n){super(),this.head=e,this.tail=n}toString(){return"["+Qt("; ",this)+"]"}Equals(e){const n=this;return n===e?!0:((o,s)=>{t:for(;;){const i=o,l=s,u=i.tail,c=l.tail;if(u!=null)if(c!=null){const a=h(u),f=h(c);if(R(i.head,l.head)){o=a,s=f;continue t}else return!1}else return!1;else return c==null}})(n,e)}GetHashCode(){return((r,o,s)=>{t:for(;;){const i=r,l=o,u=s,c=u.tail;if(c!=null){const a=h(c);if(i>18)return l|0;r=i+1,o=(l<<1)+M(u.head)+631*i,s=a;continue t}else return l|0}})(0,0,this)|0}toJSON(){const e=this;return Array.from(e)}CompareTo(e){return((o,s)=>{t:for(;;){const i=o,l=s,u=i.tail,c=l.tail;if(u!=null)if(c!=null){const a=h(u),f=h(c),p=I(i.head,l.head)|0;if(p===0){o=a,s=f;continue t}else return p|0}else return 1;else return c!=null?-1:0}})(this,e)|0}GetEnumerator(){return ee(this)}[Symbol.iterator](){return ht(y(this))}"System.Collections.IEnumerable.GetEnumerator"(){return y(this)}}class te{constructor(e){this.xs=e,this.it=this.xs,this.current=q()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this,n=e.it.tail;if(n!=null){const r=h(n);return e.current=e.it.head,e.it=r,!0}else return!1}"System.Collections.IEnumerator.Reset"(){const e=this;e.it=e.xs,e.current=q()}Dispose(){}}function ee(t){return new te(t)}function K(){return new O(q(),void 0)}function ne(t,e){return new O(t,e)}function re(t){return t.tail==null}function oe(t){return((n,r)=>{t:for(;;){const o=n,i=r.tail;if(i!=null){n=o+1,r=h(i);continue t}else return o|0}})(0,t)|0}function se(t){if(t.tail!=null)return t.head;throw new Error(pt+"\\nParameter name: list")}function yt(t){const e=t.tail;if(e!=null)return h(e);throw new Error(pt+"\\nParameter name: list")}function ie(t){const e=oe(t)|0,n=gt(new Array(e),0,e,null);return((o,s)=>{t:for(;;){const i=o,l=s;if(!re(l)){X(n,i,se(l)),o=i+1,s=yt(l);continue t}break}})(0,t),n}function ue(t,e){let n=e;for(let r=t.length-1;r>=0;r--)n=ne(d(r,t),n);return n}function wt(t){return ue(t,K())}function le(t){let e,n;if(b(t))return wt(t);if(t instanceof O)return t;{const r=K();let o=r;const s=y(t);try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const u=s["System.Collections.Generic.IEnumerator`1.get_Current"]();o=(e=o,n=new O(u,void 0),e.tail=n,n)}}finally{C(s)}const i=o,l=K();return i.tail=l,yt(r)}}const ce="Enumeration already finished.",ae="Enumeration has not started. Call MoveNext.",fe="Reset is not supported on this enumerator.";function he(){throw new Error(fe)}function U(){throw new Error(ae)}function V(){throw new Error(ce)}class de{constructor(e){this.f=e}toString(){const e=this;let n=0,r="seq [";const o=y(e);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+G(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{C(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return ht(y(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function me(t){return new de(t)}class pe{constructor(e,n,r){this.current=e,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){he()}Dispose(){this.dispose()}}function z(t,e,n){return new pe(t,e,n)}function ge(t){let e,n,r=!1,o=!1,s;const i=()=>{if(o=!0,n!=null){const l=h(n);try{C(l)}finally{n=void 0}}if(e!=null){const l=h(e);try{C(l)}finally{e=void 0}}};return z(()=>(r?o&&V():U(),s!=null?h(s):V()),()=>{let l;if(r||(r=!0),o)return!1;{let u;for(;u==null;){const c=e,a=n;if(c!=null)if(a!=null){const f=h(a);if(f["System.Collections.IEnumerator.MoveNext"]())s=T(f["System.Collections.Generic.IEnumerator`1.get_Current"]()),u=!0;else try{C(f)}finally{n=void 0}}else{const f=h(c);f["System.Collections.IEnumerator.MoveNext"]()?n=(l=f["System.Collections.Generic.IEnumerator`1.get_Current"](),y(l)):(i(),u=!1)}else e=y(t)}return h(u)}},()=>{o||i()})}function _e(t,e,n){let r=!1,o,s=T(t());const i=()=>{if(s!=null){const u=h(s);try{n(u)}finally{s=void 0}}},l=()=>{try{i()}finally{o=void 0}};return z(()=>(r||U(),o!=null?h(o):V()),()=>{if(r||(r=!0),s!=null){const u=h(s);let c;try{c=e(u)}catch(a){throw l(),a}return c!=null?(o=c,!0):(l(),!1)}else return!1},i)}function ye(t,e){let n,r=e;return z(()=>{if(n!=null){const o=h(n)[0];return h(n)[1],o}else return U()},()=>(n=t(r),n!=null?(h(n)[0],r=h(n)[1],!0):!1),()=>{})}function we(t,e){e==null&&xt(t)}function $(t){return me(t)}function Et(t){return we("source",t),y(t)}function _(t){return $(()=>y(t()))}function St(t){return $(()=>ge(t))}function Ee(t,e){return $(()=>ye(t,e))}function st(t){return _(()=>Wt(t))}function k(t){return t instanceof O?ie(t):Array.from(t)}function Se(t){return b(t)?wt(t):t instanceof O?t:le(t)}function Ce(t,e,n){return $(()=>_e(t,e,n))}function D(t,e){return St([t,e])}function be(t,e,n){const r=Et(n);try{let o=e;for(;r["System.Collections.IEnumerator.MoveNext"]();)o=t(o,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return o}finally{C(r)}}function Ct(t,e){return Ce(()=>Et(e),n=>n["System.Collections.IEnumerator.MoveNext"]()?T(t(n["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0,n=>{C(n)})}function it(t,e){return _(()=>St(Ct(t,e)))}class m extends Z{constructor(e,n){super(),this.X=e,this.Y=n}toString(){const e=this;return`(${e.X}, ${e.Y})`}}function ut(){return new m(0,0)}function Ie(t){return Math.sqrt(t.X*t.X+t.Y*t.Y)}function E(t,e){return new m(t,e)}function Ae(t,e,n,r){const o=I(t,n)|0;if(o===0)throw new Error("The step of a range cannot be zero");const s=o>0;return i=>{const l=I(i,e)|0;return s&&l<=0||!s&&l>=0?[i,r(i,t)]:void 0}}function Oe(t,e,n,r,o){const s=Ae(e,n,r,o);return _(()=>Ee(s,t))}function P(t,e,n){return Oe(t,e,n,0,(r,o)=>r+o)}class Ne extends Z{constructor(e,n,r,o,s,i,l){super(),this.mu_k=e,this.sigma_k=n,this.w_k=r,this.mu_g=o,this.sigma_g=s,this.c_rep=i,this.dt=l}}function Ge(t,e){const n=Kt(1-e,0);return[.5*t*n*n,-t*n]}function lt(t,e,n,r){const o=(r-t)/e,s=n/Math.exp(o*o);return[s,-2*o*s/e]}function ve(t,e){const n=e.length|0,r=_t(n,o=>k(_(()=>it(s=>{let i,l,u,c,a;const f=d(o,e),p=d(s,e);a=new m(f.X-p.X,f.Y-p.Y);const w=Ie(a)+1e-20;let L;const Q=a,x=w;L=new m(Q.X/x,Q.Y/x);const tt=Ge(t.c_rep,w),et=lt(t.mu_k,t.sigma_k,t.w_k,w);return st({K:et[0],R:tt[0],dK:(i=et[1],l=L,new m(i*l.X,i*l.Y)),dR:(u=tt[1],c=L,new m(u*c.X,u*c.Y))})},P(o,1,n-1)))));return k(_(()=>it(o=>{const s=k(_(()=>Ct(u=>{let c,a;const f=o|0,p=u|0;if(f<=p)return d(p-f,d(f,r));{const w=d(f-p,d(p,r));return{K:w.K,R:w.R,dK:(c=w.dK,new m(-c.X,-c.Y)),dR:(a=w.dR,new m(-a.X,-a.Y))}}},P(0,1,n-1)))),i=Y(u=>u.K,s,{GetZero:()=>0,Add:(u,c)=>u+c}),l=lt(t.mu_g,t.sigma_g,1,i);return st({G:l[0],R_grad:Y(u=>u.dR,s,{GetZero:ut,Add:(u,c)=>{const a=u,f=c;return new m(a.X+f.X,a.Y+f.Y)}}),R_val:Y(u=>u.R,s,{GetZero:()=>0,Add:(u,c)=>u+c}),U_grad:Y(u=>u.dK,s,{GetZero:ut,Add:(u,c)=>{const a=u,f=c;return new m(a.X+f.X,a.Y+f.Y)}}),U_val:i,dG:l[1]})},P(0,1,n-1))))}function je(t,e){const n=ve(t,e);return[Vt((r,o)=>{const s=r;let i;const l=t.dt;let u,c;const a=o.dG,f=o.U_grad;c=new m(a*f.X,a*f.Y);const p=o.R_grad;return u=new m(c.X-p.X,c.Y-p.Y),i=new m(l*u.X,l*u.Y),new m(s.X+i.X,s.Y+i.Y)},e,n),n]}class Me{constructor(e){this.MBIG=2147483647,this.inext=0,this.inextp=0,this.seedArray=gt(new Array(56),0,56,0);let n=0,r=0,o=0;r=161803398-((e===-2147483648?2147483647:Math.abs(e))|0)|0,this.seedArray[55]=r|0,o=1;for(let i=1;i<=54;i++)n=21*i%55|0,this.seedArray[n]=o|0,o=r-o|0,o<0&&(o=o+this.MBIG|0),r=d(n,this.seedArray)|0;for(let i=1;i<=4;i++)for(let l=1;l<=55;l++)this.seedArray[l]=d(l,this.seedArray)-d(1+(l+30)%55,this.seedArray)|0,d(l,this.seedArray)<0&&(this.seedArray[l]=d(l,this.seedArray)+this.MBIG|0);this.inext=0,this.inextp=21}Next0(){return v(this)|0}Next1(e){const n=this;if(e<0)throw new Error("maxValue must be positive");return~~(H(n)*e)|0}Next2(e,n){const r=this;if(e>n)throw new Error("minValue must be less than maxValue");const o=N(B(n-e));return(Zt(o,N(B(2147483647)))<=0?~~(H(r)*ot(o))+e:~~zt(N(Jt(N(Ut(Xe(r)*ot(o))),N(B(e))))))|0}NextDouble(){return H(this)}NextBytes(e){const n=this;if(e==null)throw new Error("buffer");for(let r=0;r<=e.length-1;r++)X(e,r,v(n)%256&255)}}function Re(t){return new Me(t)}function v(t){let e=0,n=t.inext,r=t.inextp;return n=n+1|0,n>=56&&(n=1),r=r+1|0,r>=56&&(r=1),e=d(n,t.seedArray)-d(r,t.seedArray)|0,e===t.MBIG&&(e=e-1|0),e<0&&(e=e+t.MBIG|0),t.seedArray[n]=e|0,t.inext=n|0,t.inextp=r|0,e|0}function H(t){return v(t)*(1/t.MBIG)}function Xe(t){let e=v(t);v(t)%2===0&&(e=-e);let n=e;return n=n+2147483646,n=n/(2*2147483646),n}function Ye(t){return Re(t)}const ct=new Ne(4,1,.022,.6,.15,1,.1),j=document.getElementById("canvas");j.width=800;j.height=800;const g=j.getContext("2d"),Fe=10,ke=25;function Pe(t){let e;const n=[t,new Array(0)];e=be((u,c)=>je(ct,u[0]),[n[0],n[1]],Se(P(1,1,Fe)));const r=e[0],o=e[1],s=j.width,i=j.height;g.clearRect(0,0,s,i),g.translate(s/2,i/2);const l=s/ke;g.scale(l,l),g.lineWidth=.05;for(let u=0;u<=r.length-1;u++){let c;c=`hsl(${360*((d(u,o).R_val-d(u,o).G)/1.5+.5)}, 100%, 50%)`,g.beginPath();const a=d(u,r),f=ct.c_rep/(d(u,o).R_val*5);g.arc(a.X,a.Y,f,0,3.141592653589793*2),g.fillStyle=c,g.fill(),g.stroke()}return g.setTransform(1,0,0,1,0,0),r}function bt(t,e,n){window.requestAnimationFrame(r=>{bt(t+1,t%10===0?(console.log(T(`${(r-e)/10} ms/step`)),r):e,Pe(n))})}const at=Ye(0);function F(t,e,n){return _t(t,r=>new m(at.NextDouble()*e.X+n.X,at.NextDouble()*e.Y+n.Y))}const qe=k(_(()=>D(F(50,E(8,8),E(2.5,2.5)),_(()=>D(F(50,E(-8,8),E(-2.5,2.5)),_(()=>D(F(50,E(8,-8),E(2.5,-2.5)),_(()=>F(50,E(-8,-8),E(-2.5,-2.5))))))))));bt(0,0,qe);
