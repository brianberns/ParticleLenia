(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function A(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Gt(t){return t!=null&&typeof t.GetEnumerator=="function"}function Tt(t){return t!=null&&typeof t.CompareTo=="function"}function jt(t){return t!=null&&typeof t.Equals=="function"}function Dt(t){return t!=null&&typeof t.GetHashCode=="function"}function qt(t){return t!=null&&typeof t.Dispose=="function"}function N(t){qt(t)&&t.Dispose()}function K(){return null}function bt(t,e){var n,r;return((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===((r=Object.getPrototypeOf(e))==null?void 0:r.constructor)}class $t{constructor(e){this.iter=e,this.current=K()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this.iter.next();return this.current=e.value,!e.done}"System.Collections.IEnumerator.Reset"(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function E(t){return Gt(t)?t.GetEnumerator():new $t(t[Symbol.iterator]())}function It(t){return{next(){const e=t["System.Collections.IEnumerator.MoveNext"](),n=e?t["System.Collections.Generic.IEnumerator`1.get_Current"]():void 0;return{done:!e,value:n}}}}function ut(t,e){return t.toString(10).padStart(e,"0")}function lt(t){const e=t;return typeof e.offset=="number"?e.offset:t.kind===1?0:t.getTimezoneOffset()*-6e4}class I{static id(e){return I.idMap.has(e)||I.idMap.set(e,++I.count),I.idMap.get(e)}}I.idMap=new WeakMap;I.count=0;function Ct(t){let e=0,n=5381;const r=t.length;for(;e<r;)n=n*33^t.charCodeAt(e++);return n}function ct(t){return t*2654435761|0}function Ht(t){return Ct(t.toString(32))}function nt(t){let e=0;const n=t.length;for(let r=0;r<n;r++){const o=t[r];e=(e<<5)+e^o}return e}function Lt(t){return t.getTime()}function Wt(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r++)n[r]=q(t[r]);return nt(n)}function q(t){var e;if(t==null)return 0;switch(typeof t){case"boolean":return t?1:0;case"number":return ct(t);case"bigint":return Ht(t);case"string":return Ct(t);default:{if(Dt(t))return t.GetHashCode();if(A(t))return Wt(t);if(t instanceof Date)return Lt(t);if(((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)===Object){const n=Object.values(t).map(r=>q(r));return nt(n)}else return ct(I.id(t))}}}function Kt(t,e,n){if(t==null)return e==null;if(e==null||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function Vt(t,e){return Kt(t,e,$)}function zt(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++)if(n[o]!==r[o]||!$(t[n[o]],e[r[o]]))return!1;return!0}function $(t,e){var n;return t===e?!0:t==null?e==null:e==null?!1:jt(t)?t.Equals(e):A(t)?A(e)&&Vt(t,e):typeof t!="object"?!1:t instanceof Date?e instanceof Date&&At(t,e)===0:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object&&zt(t,e)}function At(t,e){let n,r;return"offset"in t&&"offset"in e?(n=t.getTime(),r=e.getTime()):(n=t.getTime()+lt(t),r=e.getTime()+lt(e)),n===r?0:n<r?-1:1}function Ut(t,e,n){if(t==null)return e==null?0:1;if(e==null)return-1;if(t.length!==e.length)return t.length<e.length?-1:1;for(let r=0,o=0;r<t.length;r++)if(o=n(t[r],e[r]),o!==0)return o;return 0}function Jt(t,e){return Ut(t,e,O)}function Zt(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return n.length<r.length?-1:1;n.sort(),r.sort();for(let o=0,s=0;o<n.length;o++){const i=n[o];if(i!==r[o])return i<r[o]?-1:1;if(s=O(t[i],e[i]),s!==0)return s}return 0}function O(t,e){var n;return t===e?0:t==null?e==null?0:-1:e==null?1:Tt(t)?t.CompareTo(e):A(t)?A(e)?Jt(t,e):-1:typeof t!="object"?t<e?-1:1:t instanceof Date?e instanceof Date?At(t,e):-1:((n=Object.getPrototypeOf(t))==null?void 0:n.constructor)===Object?Zt(t,e):-1}function Qt(t){let e=t;return(...n)=>{if(n.length===0)return e;e=n[0]}}function xt(t){let e=0,n="[";for(const r of t){if(e===0)n+=X(r);else if(e===100){n+="; ...";break}else n+="; "+X(r);e++}return n+"]"}function X(t,e=0){var n;if(t!=null&&typeof t=="object"){if(typeof t.toString=="function")return t.toString();if(Symbol.iterator in t)return xt(t);{const r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor;return r===Object&&e<10?"{ "+Object.entries(t).map(([o,s])=>o+" = "+X(s,e+1)).join(`
  `)+" }":(r==null?void 0:r.name)??""}}return String(t)}function te(t){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++)e[n[r]]=t[n[r]];return e}function ee(t){return"{ "+Object.entries(t).map(([e,n])=>e+" = "+X(n)).join(`
  `)+" }"}function ne(t){const e=Object.values(t).map(n=>q(n));return nt(e)}function re(t,e){if(t===e)return!0;if(bt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++)if(!$(t[n[r]],e[n[r]]))return!1;return!0}else return!1}function oe(t,e){if(t===e)return 0;if(bt(t,e)){const n=Object.keys(t);for(let r=0;r<n.length;r++){const o=O(t[n[r]],e[n[r]]);if(o!==0)return o}return 0}else return-1}class H{toJSON(){return te(this)}toString(){return ee(this)}GetHashCode(){return ne(this)}Equals(e){return re(this,e)}CompareTo(e){return oe(this,e)}}const k=Symbol("numeric");function se(t){return typeof t=="number"||typeof t=="bigint"||(t==null?void 0:t[k])}function ie(t,e){return typeof t=="number"||typeof t=="bigint"?t<e?-1:t>e?1:0:t.CompareTo(e)}function ue(t,e){return typeof t=="number"?t*e:typeof t=="bigint"?t*BigInt(e):t[k]().multiply(e)}function le(t,e){return typeof t=="number"?t.toFixed(e):typeof t=="bigint"?t:t[k]().toFixed(e)}function at(t,e){return typeof t=="number"?t.toPrecision(e):typeof t=="bigint"?t:t[k]().toPrecision(e)}function ft(t,e){return typeof t=="number"?t.toExponential(e):typeof t=="bigint"?t:t[k]().toExponential(e)}function ht(t){return typeof t=="number"?(Number(t)>>>0).toString(16):typeof t=="bigint"?BigInt.asUintN(64,t).toString(16):t[k]().toHex()}class f extends H{constructor(e,n){super(),this.X=e,this.Y=n}}function j(){return new f(0,0)}function ce(t){return Math.sqrt(t.X*t.X+t.Y*t.Y)}function m(t,e){return new f(t,e)}function z(t,e){return new Array(e)}class M{constructor(e){this.value=e}toJSON(){return this.value}toString(){return String(this.value)}GetHashCode(){return q(this.value)}Equals(e){return e==null?!1:$(this.value,e instanceof M?e.value:e)}CompareTo(e){return e==null?1:O(this.value,e instanceof M?e.value:e)}}function g(t){if(t==null)throw new Error("Option has no value");return t instanceof M?t.value:t}function rt(t){return t==null||t instanceof M?new M(t):t}function Ot(t,e){return t>e?t:e}function ae(t,e){return t<e?t:e}const vt="Collection was empty.";function fe(){throw new Error("Arrays had different lengths")}function Nt(t,e,n,r){const o=e|0;return t.fill(r,o,o+n)}function Xt(t,e,n){const r=e.length|0,o=z(n,r);for(let s=0;s<=r-1;s++)B(o,s,t(d(s,e)));return o}function he(t,e,n,r){if(e.length!==n.length)throw new Error("Arrays had different lengths");const o=z(r,e.length);for(let s=0;s<=e.length-1;s++)B(o,s,t(d(s,e),d(s,n)));return o}function de(t,e){const n=z(e,1);return B(n,0,t),n}function G(t,e,n){if(t<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=z(n,t);for(let o=0;o<=t-1;o++)B(r,o,e(o));return r}function me(t,e,n){const r=t;return n.reduce(r,e)}function ge(t,e,n){e.length!==n.length&&fe();for(let r=0;r<=e.length-1;r++)t(d(r,e),d(r,n))}function d(t,e){if(t<0||t>=e.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");return e[t]}function B(t,e,n){if(e<0||e>=t.length)throw new Error("Index was outside the bounds of the array.\\nParameter name: index");t[e]=n}class Mt extends H{constructor(e,n,r){super(),this.Center=e,this.Size=n,this.Mobile=r}}function Q(t){const e=t.Center;let n;const r=t.Size;return n=new f(r.X/2,r.Y/2),new f(e.X-n.X,e.Y-n.Y)}function dt(t){const e=t.Center;let n;const r=t.Size;return n=new f(r.X/2,r.Y/2),new f(e.X+n.X,e.Y+n.Y)}function T(t,e,n){return new Mt(t,e,n)}class ot extends H{constructor(e,n){super(),this.Particles=e,this.Blocks=n}}function pe(t,e){return new ot(t,e)}class _e extends H{constructor(e,n,r,o,s,i){super(),this.R_grad=e,this.R_val=n,this.U_grad=r,this.U_val=o,this.dG=s,this.G=i}}function we(t,e){const n=Ot(1-e,0);return[.5*t*n*n,-1*n]}function mt(t,e,n,r){const o=(r-t)/e,s=n*Math.exp(-(o*o));return[s,-2*o*s/e]}const ye=4,Ee=1,Se=.022,be=.6,Ie=.15,Yt=1,Ce=.05;function Ae(t){const e=t.length|0,n=G(e,r=>G(e-r,o=>{let s,i,u,l,c;const a=d(r,t),h=d(o+r,t);c=new f(a.X-h.X,a.Y-h.Y);const p=ce(c)+1e-20;let S;const F=c,_=p;S=new f(F.X/_,F.Y/_);const w=we(Yt,p),v=mt(ye,Ee,Se,p);return{K:v[0],R:w[0],dK:(s=v[1],i=S,new f(s*i.X,s*i.Y)),dR:(u=w[1],l=S,new f(u*l.X,u*l.Y))}}));return G(e,r=>{let o,s,i,u,l;const c=G(e,(o=r|0,_=>{let w,v;if(o<=_)return d(_-o,d(o,n));{const L=d(o-_,d(_,n));return{K:L.K,R:L.R,dK:(w=L.dK,new f(-w.X,-w.Y)),dR:(v=L.dR,new f(-v.X,-v.Y))}}}));let a=j(),h=0,p=j(),S=0;for(let _=0;_<=c.length-1;_++){const w=d(_,c);a=(s=a,i=w.dR,new f(s.X+i.X,s.Y+i.Y)),h=h+w.R,p=(u=p,l=w.dK,new f(u.X+l.X,u.Y+l.Y)),S=S+w.K}const F=mt(be,Ie,1,S);return new _e(a,h,p,S,F[1],F[0])})}function Oe(t,e){const n=e.X-Q(t).X,r=dt(t).X-e.X,o=e.Y-Q(t).Y,s=dt(t).Y-e.Y;if(n>0&&r>0&&o>0&&s>0){const i=n<r?-n:r,u=o<s?-o:s,l=Math.abs(i)<Math.abs(u)?[i,0]:[0,u],c=e,a=m(.3*l[0],.3*l[1]);return new f(c.X+a.X,c.Y+a.Y)}else return e}function ve(t){const e=Ae(t.Particles);return[new ot(me((n,r)=>Xt(o=>Oe(r,o),n),he((n,r)=>{const o=n;let s;const i=Ce;let u,l;const c=r.dG,a=r.U_grad;l=new f(c*a.X,c*a.Y);const h=r.R_grad;return u=new f(l.X-h.X,l.Y-h.Y),s=new f(i*u.X,i*u.Y),new f(o.X+s.X,o.Y+s.Y)},t.Particles,e),t.Blocks),t.Blocks),e]}const gt=.2;let V=j();window.onkeydown=t=>{let e;V=(e=t.key,e==="ArrowUp"?m(0,-.2):e==="ArrowDown"?m(0,gt):e==="ArrowLeft"?m(-.2,0):e==="ArrowRight"?m(gt,0):V)};window.onkeyup=t=>{V=j()};function Ne(t){return new ot(t.Particles,Xt(e=>{let n,r;return e.Mobile?new Mt((n=e.Center,r=V,new f(n.X+r.X,n.Y+r.Y)),e.Size,e.Mobile):e},t.Blocks))}function Xe(t,e){t.beginPath();const n=Q(e),r=e.Size;t.rect(n.X,n.Y,r.X,r.Y),t.fillStyle="black",t.fill()}BigInt.prototype.toJSON=function(){return`${this.toString()}`};function Me(t,e){return t<e?-1:t>e?1:0}function Ye(t,e){return t+e}function U(t){return BigInt(t)}function ke(t){return BigInt(Math.trunc(t))}function Be(t){return Number(BigInt.asIntN(32,t))}function P(t){return BigInt.asIntN(64,t)}function pt(t){return Number(t)}function Fe(t){const e=t<0;t=Math.abs(t);const n=~~(t/36e5),r=t%36e5/6e4;return(e?"-":"+")+ut(n,2)+":"+ut(r,2)}function Pe(t,e){return new Date(t.getTime()+(t.offset??0)).toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Fe(t.offset??0)}function Re(t,e){return t.kind===1?t.toUTCString():t.toLocaleString()}function Ge(t,e,n){return t.offset!=null?Pe(t):Re(t)}function Te(t,e){const n=new Date(t);return n.kind=e|0,n}function je(){return Te(Date.now(),2)}function De(t){return t.kind===1?t.getUTCMilliseconds():t.getMilliseconds()}const R=/(?:(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w))?%P\(\)/g;function qe(t,e){return ie(t,e)<0}function $e(t,e){let n=0,r=0,o="";R.lastIndex=0;let s=R.exec(t);for(;s;){const i=s.index+(s[1]||"").length;o+=t.substring(r,i).replace(/%%/g,"%");const[,,u,l,c,a]=s;r=R.lastIndex,o+=We(e[n++],u,l,c,a),R.lastIndex=r-1,s=R.exec(t)}return o+=t.substring(r).replace(/%%/g,"%"),o}function He(t,e){return typeof e=="string"?t(e):e.cont(t)}function Le(t){return He(e=>e,t)}function We(t,e,n,r,o){let s="";if(e=e||"",o=o||"",se(t))switch(o.toLowerCase()!=="x"&&(qe(t,0)?(t=ue(t,-1),s="-"):e.indexOf(" ")>=0?s=" ":e.indexOf("+")>=0&&(s="+")),r=r==null?null:parseInt(r,10),o){case"f":case"F":r=r??6,t=le(t,r);break;case"g":case"G":t=r!=null?at(t,r):at(t);break;case"e":case"E":t=r!=null?ft(t,r):ft(t);break;case"x":t=ht(t);break;case"X":t=ht(t).toUpperCase();break;default:t=String(t);break}else t instanceof Date?t=Ge(t):t=X(t);if(n=typeof n=="number"?n:parseInt(n,10),isNaN(n))t=s+t;else{const i=e.indexOf("0")>=0,u=e.indexOf("-")>=0,l=u||!i?" ":"0";l==="0"?(t=_t(t,n-s.length,l,u),t=s+t):t=_t(s+t,n,l,u)}return t}function Ke(t,e){return Array.isArray(e)?e.join(t):Array.from(e).join(t)}function _t(t,e,n,r){n=n||" ",e=e-t.length;for(let o=0;o<e;o++)t=r?t+n:n+t;return t}function Ve(t){throw new Error(t)}class Y extends H{constructor(e,n){super(),this.head=e,this.tail=n}toString(){return"["+Ke("; ",this)+"]"}Equals(e){const n=this;return n===e?!0:((o,s)=>{t:for(;;){const i=o,u=s,l=i.tail,c=u.tail;if(l!=null)if(c!=null){const a=g(l),h=g(c);if($(i.head,u.head)){o=a,s=h;continue t}else return!1}else return!1;else return c==null}})(n,e)}GetHashCode(){return((r,o,s)=>{t:for(;;){const i=r,u=o,l=s,c=l.tail;if(c!=null){const a=g(c);if(i>18)return u|0;r=i+1,o=(u<<1)+q(l.head)+631*i,s=a;continue t}else return u|0}})(0,0,this)|0}toJSON(){const e=this;return Array.from(e)}CompareTo(e){return((o,s)=>{t:for(;;){const i=o,u=s,l=i.tail,c=u.tail;if(l!=null)if(c!=null){const a=g(l),h=g(c),p=O(i.head,u.head)|0;if(p===0){o=a,s=h;continue t}else return p|0}else return 1;else return c!=null?-1:0}})(this,e)|0}GetEnumerator(){return Ue(this)}[Symbol.iterator](){return It(E(this))}"System.Collections.IEnumerable.GetEnumerator"(){return E(this)}}class ze{constructor(e){this.xs=e,this.it=this.xs,this.current=K()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const e=this,n=e.it.tail;if(n!=null){const r=g(n);return e.current=e.it.head,e.it=r,!0}else return!1}"System.Collections.IEnumerator.Reset"(){const e=this;e.it=e.xs,e.current=K()}Dispose(){}}function Ue(t){return new ze(t)}function x(){return new Y(K(),void 0)}function Je(t,e){return new Y(t,e)}function Ze(t){return t.tail==null}function Qe(t){return((n,r)=>{t:for(;;){const o=n,i=r.tail;if(i!=null){n=o+1,r=g(i);continue t}else return o|0}})(0,t)|0}function xe(t){if(t.tail!=null)return t.head;throw new Error(vt+"\\nParameter name: list")}function kt(t){const e=t.tail;if(e!=null)return g(e);throw new Error(vt+"\\nParameter name: list")}function tn(t){const e=Qe(t)|0,n=Nt(new Array(e),0,e,null);return((o,s)=>{t:for(;;){const i=o,u=s;if(!Ze(u)){B(n,i,xe(u)),o=i+1,s=kt(u);continue t}break}})(0,t),n}function en(t,e){let n=e;for(let r=t.length-1;r>=0;r--)n=Je(d(r,t),n);return n}function Bt(t){return en(t,x())}function nn(t){let e,n;if(A(t))return Bt(t);if(t instanceof Y)return t;{const r=x();let o=r;const s=E(t);try{for(;s["System.Collections.IEnumerator.MoveNext"]();){const l=s["System.Collections.Generic.IEnumerator`1.get_Current"]();o=(e=o,n=new Y(l,void 0),e.tail=n,n)}}finally{N(s)}const i=o,u=x();return i.tail=u,kt(r)}}const rn="Enumeration already finished.",on="Enumeration has not started. Call MoveNext.",sn="Reset is not supported on this enumerator.";function un(){throw new Error(sn)}function Ft(){throw new Error(on)}function wt(){throw new Error(rn)}class ln{constructor(e){this.f=e}toString(){const e=this;let n=0,r="seq [";const o=E(e);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+X(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{N(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return It(E(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function cn(t){return new ln(t)}class an{constructor(e,n,r){this.current=e,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){un()}Dispose(){this.dispose()}}function Pt(t,e,n){return new an(t,e,n)}function fn(t){let e,n,r=!1,o=!1,s;const i=()=>{if(o=!0,n!=null){const u=g(n);try{N(u)}finally{n=void 0}}if(e!=null){const u=g(e);try{N(u)}finally{e=void 0}}};return Pt(()=>(r?o&&wt():Ft(),s!=null?g(s):wt()),()=>{let u;if(r||(r=!0),o)return!1;{let l;for(;l==null;){const c=e,a=n;if(c!=null)if(a!=null){const h=g(a);if(h["System.Collections.IEnumerator.MoveNext"]())s=rt(h["System.Collections.Generic.IEnumerator`1.get_Current"]()),l=!0;else try{N(h)}finally{n=void 0}}else{const h=g(c);h["System.Collections.IEnumerator.MoveNext"]()?n=(u=h["System.Collections.Generic.IEnumerator`1.get_Current"](),E(u)):(i(),l=!1)}else e=E(t)}return g(l)}},()=>{o||i()})}function hn(t,e){let n,r=e;return Pt(()=>{if(n!=null){const o=g(n)[0];return g(n)[1],o}else return Ft()},()=>(n=t(r),n!=null?(g(n)[0],r=g(n)[1],!0):!1),()=>{})}function dn(t,e){e==null&&Ve(t)}function st(t){return cn(t)}function mn(t){return dn("source",t),E(t)}function y(t){return st(()=>E(t()))}function gn(t){return st(()=>fn(t))}function pn(t,e){return st(()=>hn(t,e))}function _n(){return y(()=>new Array(0))}function wn(t){return y(()=>de(t))}function Rt(t){return t instanceof Y?tn(t):Array.from(t)}function yn(t){return A(t)?Bt(t):t instanceof Y?t:nn(t)}function W(t,e){return gn([t,e])}function En(t,e,n){const r=mn(n);try{let o=e;for(;r["System.Collections.IEnumerator.MoveNext"]();)o=t(o,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return o}finally{N(r)}}function Sn(t,e,n,r){const o=O(t,n)|0;if(o===0)throw new Error("The step of a range cannot be zero");const s=o>0;return i=>{const u=O(i,e)|0;return s&&u<=0||!s&&u>=0?[i,r(i,t)]:void 0}}function bn(t,e,n,r,o){const s=Sn(e,n,r,o);return y(()=>pn(s,t))}function In(t,e,n){return bn(t,e,n,0,(r,o)=>r+o)}function yt(t,e,n,r){return G(e,o=>{const s=t.NextDouble(),i=2*3.141592653589793*t.NextDouble();let u;const l=m(s*Math.cos(i),s*Math.sin(i)),c=n;u=new f(l.X*c.X,l.Y*c.Y);const a=r;return new f(u.X+a.X,u.Y+a.Y)})}const Cn=5,An=2*3.141592653589793,J=-.5,Et=.8;function On(t){return`hsl(${300*((ae(Ot(t,J),Et)+J)/(Et-J))+60}, 100%, 50%)`}function vn(t,e,n){t.beginPath();const r=Yt/(n.R_val*Cn);t.arc(e.X,e.Y,r,0,An),t.fillStyle=On(n.R_val-n.G),t.fill(),t.stroke()}class Nn{constructor(e){this.MBIG=2147483647,this.inext=0,this.inextp=0,this.seedArray=Nt(new Array(56),0,56,0);let n=0,r=0,o=0;r=161803398-((e===-2147483648?2147483647:Math.abs(e))|0)|0,this.seedArray[55]=r|0,o=1;for(let i=1;i<=54;i++)n=21*i%55|0,this.seedArray[n]=o|0,o=r-o|0,o<0&&(o=o+this.MBIG|0),r=d(n,this.seedArray)|0;for(let i=1;i<=4;i++)for(let u=1;u<=55;u++)this.seedArray[u]=d(u,this.seedArray)-d(1+(u+30)%55,this.seedArray)|0,d(u,this.seedArray)<0&&(this.seedArray[u]=d(u,this.seedArray)+this.MBIG|0);this.inext=0,this.inextp=21}Next0(){return D(this)|0}Next1(e){const n=this;if(e<0)throw new Error("maxValue must be positive");return~~(Z(n)*e)|0}Next2(e,n){const r=this;if(e>n)throw new Error("minValue must be less than maxValue");const o=P(U(n-e));return(Me(o,P(U(2147483647)))<=0?~~(Z(r)*pt(o))+e:~~Be(P(Ye(P(ke(Mn(r)*pt(o))),P(U(e))))))|0}NextDouble(){return Z(this)}NextBytes(e){const n=this;if(e==null)throw new Error("buffer");for(let r=0;r<=e.length-1;r++)B(e,r,D(n)%256&255)}}function Xn(t){return new Nn(t)}function D(t){let e=0,n=t.inext,r=t.inextp;return n=n+1|0,n>=56&&(n=1),r=r+1|0,r>=56&&(r=1),e=d(n,t.seedArray)-d(r,t.seedArray)|0,e===t.MBIG&&(e=e-1|0),e<0&&(e=e+t.MBIG|0),t.seedArray[n]=e|0,t.inext=n|0,t.inextp=r|0,e|0}function Z(t){return D(t)*(1/t.MBIG)}function Mn(t){let e=D(t);D(t)%2===0&&(e=-e);let n=e;return n=n+2147483646,n=n/(2*2147483646),n}function Yn(t){return Xn(t)}function kn(t){const e=t/8;return T(m(-3.2*e,2.2*e),m(e,e),!0)}function Bn(t,e,n){const r=t+2*n,o=e+2*n;return[T(m((-40-n)/2,0),m(n,o),!1),T(m((t+n)/2,0),m(n,o),!1),T(m(0,(-e-n)/2),m(r,n),!1),T(m(0,(e+n)/2),m(r,n),!1)]}function Fn(t,e){let n;const r=De(je())|0;if(console.log(rt(`Random seed: ${r}`)),n=Yn(r),e){const o=(s,i)=>yt(n,~~(t/4),m(2,2),m(s,i));return Rt(y(()=>W(o(6.5,5.5),y(()=>W(o(-6.5,5.5),y(()=>W(o(6.5,-5.5),y(()=>o(-6.5,-5.5)))))))))}else{const o=t/22;return yt(n,t,m(o,o),j())}}function Pn(t,e,n,r,o){const s=kn(t),i=Bn(t,e,2*s.Size.X);return pe(Fn(n,o),Rt(y(()=>W(r?wn(s):_n(),y(()=>i)))))}var tt;(function(t){t[t.AllowHexSpecifier=512]="AllowHexSpecifier"})(tt||(tt={}));function Rn(t,e){const[,n,r,o]=t;return{sign:n||"",prefix:r||"",digits:o,radix:e}}function St(t,e){switch(e){case 8:return t?[0,255]:[-128,127];case 16:return t?[0,65535]:[-32768,32767];case 32:return t?[0,4294967295]:[-2147483648,2147483647];default:throw new Error("Invalid bit size.")}}function Gn(t){switch(t){case 2:return/[^0-1]/;case 8:return/[^0-7]/;case 10:return/[^0-9]/;case 16:return/[^0-9a-fA-F]/;default:throw new Error("Invalid Base.")}}function Tn(t,e){if(e&tt.AllowHexSpecifier)return 16;switch(t){case"0b":case"0B":return 2;case"0o":case"0O":return 8;case"0x":case"0X":return 16;default:return 10}}function jn(t,e,n){const o=/^\s*([\+\-])?(0[xXoObB])?([0-9a-fA-F]+)\s*$/.exec(t.replace(/_/g,""));if(o!=null){const[,,s,i]=o;if(n=n||Tn(s,e),!Gn(n).test(i))return Rn(o,n)}return null}function Dn(t,e,n,r,o){const s=jn(t,e,o);if(s!=null){let i=Number.parseInt(s.sign+s.digits,s.radix);if(!Number.isNaN(i)){const[u,l]=St(!0,r);s.radix!==10&&i>=u&&i<=l&&(i=i<<32-r>>32-r);const[c,a]=St(n,r);if(i>=c&&i<=a)return i}}throw new Error(`The input string ${t} was not in a correct format.`)}const b=document.getElementById("canvas"),C=b.getContext("2d");C.lineWidth=.05;const it=40,qn=b.height*it/b.width;let et=Qt(!1);const $n=document.getElementById("reset");$n.onclick=t=>{et(!0)};const Hn=document.getElementById("block"),Ln=document.getElementById("quadrants"),Wn=document.getElementById("numParticles"),Kn=5;function Vn(t){let e;const n=[Ne(t),new Array(0)];e=En((s,i)=>ve(s[0]),[n[0],n[1]],yn(In(1,1,Kn)));const r=e[0];C.clearRect(0,0,b.width,b.height),C.translate(b.width/2,b.height/2);const o=b.width/it;return C.scale(o,o),r.Blocks.forEach(s=>{Xe(C,s)}),ge((s,i)=>{vn(C,s,i)},r.Particles,e[1]),C.setTransform(1,0,0,1,0,0),r}function zn(t,e,n,r){return e%t===0?(console.log(rt(Le($e("%.3f%P() frames/sec",[t*1e3/(r-n)])))),r):n}function Un(){const t=()=>Pn(it,qn,Dn(Wn.value,511,!1,32),Hn.checked,Ln.checked),e=(n,r,o)=>{window.requestAnimationFrame(s=>{const i=zn(100,n,r,s);let u;et()?(et(!1),u=t()):u=o,e(n+1,i,Vn(u))})};e(1,0,t())}Un();
